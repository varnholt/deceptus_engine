image: Visual Studio 2022

environment:
  matrix:
  - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2022
    VCVAR2022: 'C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat'

init:
- call "%VCVAR2022%"
- cd /D "%APPVEYOR_BUILD_FOLDER%"

before_build:
- cmd: |-
    mkdir build
    cd build
    dir
    cmake --version
    cmake -DCMAKE_BUILD_TYPE=Release ..

build_script:
- cmake --build . -j
- call "deploy_appveyor.bat"

artifacts:
- path: build
  name: deceptus
  type: zip
