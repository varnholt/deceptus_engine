image: Visual Studio 2022

environment:
  matrix:
  - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2022
    VCVAR2022: 'C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat'

init:
- call "%VCVAR2022%"
- cd /D "%APPVEYOR_BUILD_FOLDER%"
- mkdir build
- cd build
- cmake -DCMAKE_BUILD_TYPE=Release ..

before_build:

build_script:
- cmake --build .
- call "deploy_appveyor.bat"

artifacts:
- path: build
  name: deceptus
  type: zip
